define(["jquery","knockout","user","acs-cache"],function(e,r,n,s){function t(){var r=this;r.credential=n,r.isLoggedIn=function(r,t){e.ajax({type:"GET",url:"rest/usermgmt/users/is_login",cache:!1,global:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e,i,u){e&&e.isActive?(s.setItem("currentUserId",e.userId),s.setItem("token",e.token),n.userLoggedIn(!!e.isActive),n.userId(e.userId),n.userName(e.userName),n.firstName(e.firstName),n.lastName(e.lastName),n.email(e.email),n.timeZone(e.timeZone),n.dateFormat(e.dateFormat),n.timeFormat(e.timeFormat),n.status(!!e.isActive),n.privileges(e.privileges?e.privileges:e.roles),n.userType(e.userType),n.token=e.token,r(e.privileges?e.privileges:e.roles)):t()},error:function(e,r,n){t(),s.removeItem(null)}})},r.clearToken=function(){s.removeItem(null),n.userLoggedIn(!1),n.userName(null),n.userId(null),n.email(null),n.privileges(null),n.services(null),n.csi(null),n.userType(null),n.status(null)},r.logout=function(){n.userLoggedIn(!1),n.userName(null),window.location.href="rest/user/user_logout"},r.hasPrivilege=function(e){return n.privileges()&&n.privileges().indexOf(e)>=0},r.hasService=function(e){return!0},r.hasServiceCategory=function(e){return!0}}return console.log("defining user login module..."),new t});