define(["jquery","knockout"],function(e,t){var o=function(){};return o.prototype.showModal=function(t){var o=this;if(!t||e.isEmptyObject(t))throw new Error("An options argument is required.");var r=t.viewModel;if(!r||e.isEmptyObject(r))throw new Error("viewModel is a mandatory field in the options");var r=t.viewModel,n=t.template||r.template,d=t.context;return o._createModalElement(n,r).pipe(e).pipe(function(t){var n=e.Deferred();return o._addModalHelperToViewModal(r,n,d),o._registerModalResultCompleteHandler(n,t),o._showBootstrapModal(t),n})},o.prototype._createModalElement=function(o,r){var n=this._addHiddenDivToBody(),d=e.Deferred();return setTimeout(function(){t.renderTemplate(o,r,{afterRender:function(t){var o=t.filter(function(e){return 1===e.nodeType})[0];d.resolve(o),r.afterRender&&e.isFunction(r.afterRender)&&r.afterRender()}},n,"replaceNode")},50),d},o.prototype._addHiddenDivToBody=function(){var e=document.createElement("div");return e.style.display="none",e.setAttribute("id",Math.floor(Date.now()/1e3)),document.body.appendChild(e),e},o.prototype._addModalHelperToViewModal=function(t,o,r){t.modal={close:function(t){!t||e.isEmptyObject(t)?o.rejectWith(r,[]):o.resolveWith(r,[t,!0])}}},o.prototype._registerModalResultCompleteHandler=function(e,o){o.on("hidden.bs.modal",function(){o.each(function(e,o){t.cleanNode(o)}),o.remove()}),e.always(function(){o.modal("hide")})},o.prototype._showBootstrapModal=function(e){e.modal({backdrop:"static",keyboard:!1})},new o});