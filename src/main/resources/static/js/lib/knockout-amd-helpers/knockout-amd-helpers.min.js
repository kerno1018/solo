define(["knockout"],function(e){var t=window.requirejs||window.require||window.curl,n=e.utils.unwrapObservable,r=function(e,t){var n,r=function(){return e.apply(this,t||[])};return r.prototype=e.prototype,n=new r,n.constructor=e,n},i=function(e){return e&&e.replace(/\/?$/,"/")},a=function(t){for(var n=e.virtualElements.firstChild(t);n;){if(1===n.nodeType||8===n.nodeType)return!0;n=e.virtualElements.nextSibling(n)}return!1};e.bindingHandlers.module={init:function(o,l,u,d,p){var s,m,f=n(l()),c={},y=e.bindingHandlers.module.initializer,g=e.bindingHandlers.module.disposeMethod;return c.templateEngine=f&&f.templateEngine,c.templateProperty=e.bindingHandlers.module.templateProperty,c.afterRender=function(e,t){var r,i=n(l());i&&i.afterRender&&(r="string"==typeof i.afterRender?t&&t[i.afterRender]:i.afterRender,"function"==typeof r&&r.apply(this,arguments))},a(o)||(c.name=function(){var e=n(l());return(e&&"object"==typeof e?n(e.template||e.name):e)||""}),c.data=e.observable(),c["if"]=c.data,e.applyBindingsToNode(o,{template:c},s=p.extend({$module:null})),m=function(){e.computed(function(){var e=c.data();e&&("function"==typeof e[g]&&(e[g].call(e),e=null),c.data(null))}).dispose()},e.computed({read:function(){var a,o=n(l());o&&"object"==typeof o&&(y=o.initializer||y,g=o.disposeMethod||g,c.templateProperty=e.unwrap(o.templateProperty)||c.templateProperty,a=[].concat(n(o.data)),o=n(o.name)),m(),o&&t([i(e.bindingHandlers.module.baseDir)+o],function(e){"function"==typeof e?e=r(e,a):e&&e[y]&&(e=e[y].apply(e,a||[])||e),s.$module=e,c.data(e)})},disposeWhenNodeIsRemoved:o}),e.utils.domNodeDisposal.addDisposeCallback(o,m),{controlsDescendantBindings:!0}},baseDir:"",initializer:"initialize",disposeMethod:"dispose",templateProperty:""},e.virtualElements&&(e.virtualElements.allowedBindings.module=!0),function(e,t){var n=new e.nativeTemplateEngine,r={};n.defaultPath="templates",n.defaultSuffix=".tmpl.html",n.defaultRequireTextPluginName="text",e.templateSources.requireTemplate=function(t){this.key=t,this.template=e.observable(" "),this.requested=!1,this.retrieved=!1},e.templateSources.requireTemplate.prototype.text=function(){return!this.requested&&this.key&&(t([n.defaultRequireTextPluginName+"!"+i(n.defaultPath)+this.key+n.defaultSuffix],function(e){this.retrieved=!0,this.template(e)}.bind(this)),this.requested=!0),this.key||this.template(""),0===arguments.length?this.template():void 0},n.makeTemplateSource=function(t,n){var i;return"string"==typeof t?(i=(n||document).getElementById(t),i&&"script"===i.tagName.toLowerCase()?new e.templateSources.domElement(i):(t in r||(r[t]=new e.templateSources.requireTemplate(t)),r[t])):!t||1!==t.nodeType&&8!==t.nodeType?void 0:new e.templateSources.anonymousTemplate(t)},n.renderTemplate=function(t,r,i,a){var o,l=i&&i.afterRender,u=i&&i.templateProperty&&r.$module&&r.$module[i.templateProperty];return l&&(l=i.afterRender=i.afterRender.original||i.afterRender),o=!u||"function"!=typeof u&&"string"!=typeof u?n.makeTemplateSource(t,a):{text:function(){return"function"==typeof u?u.call(r.$module):u}},"function"==typeof l&&o instanceof e.templateSources.requireTemplate&&!o.retrieved&&(i.afterRender=function(){o.retrieved&&l.apply(this,arguments)},i.afterRender.original=l),n.renderTemplateSource(o,r,i,a)},e.amdTemplateEngine=n,e.setTemplateEngine(n)}(e,t)});