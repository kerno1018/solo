/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation","ojs/internal-deps/dvt/DvtToolkit"],function(a,f,d,b,c){function e(a,b){this.xba=b;this.Xca=a;this.u6="/"}a.fg=function(a){this.Init(a)};o_("AttributeGroupHandler",a.fg,a);a.b.ga(a.fg,a.b,"oj.AttributeGroupHandler");a.fg.prototype.Init=function(b){a.fg.q.Init.call(this);this.Xu=b?b:{};this.Jt={};this.$A=0;this.jx=this.sp();for(var c in this.Xu)b=this.jx.indexOf(this.Xu[c]),-1!==b&&this.jx.splice(b,1)};a.fg.prototype.sp=function(){return[]};
a.b.i("AttributeGroupHandler.prototype.getValueRamp",{sp:a.fg.prototype.sp});a.fg.prototype.Pc=function(a){if(this.Xu[a])return this.Xu[a];this.Jt[a]||(this.Jt[a]=this.jx[this.$A],this.$A==this.jx.length-1?this.$A=0:this.$A++);return this.Jt[a]};a.b.i("AttributeGroupHandler.prototype.getValue",{Pc:a.fg.prototype.Pc});a.fg.prototype.kY=function(){var a=[],b;for(b in this.Jt)a.push({category:b,value:this.Jt[b]});return a};a.b.i("AttributeGroupHandler.prototype.getCategoryAssignments",{kY:a.fg.prototype.kY});
a.fg.prototype.nX=function(a,b){this.Xu[a]=b};a.b.i("AttributeGroupHandler.prototype.addMatchRule",{nX:a.fg.prototype.nX});var g={CSS_TEXT_PROPERTIES:function(a){var b={};a&&(a.hasClass("oj-gaugeMetricLabel")&&a.hasClass(a.parentNode,"oj-ledGauge")?(b["font-size"]=!0,b.color=!0):a.hasClass(a,"oj-chartSliceLabel")?b.color=!0:a.hasClass("oj-treemap-node-header")&&(b["font-weight"]=!0));return g.K4(a,b)},CSS_BACKGROUND_PROPERTIES:function(a){return g.B4(a)},CSS_URL:function(a){return g.wba(a)},$M:"rgb(254, 0, 254)",
P1:"Times",Q1:"1px",bN:"1",aN:"normal",I1:4,GA:{},Ffa:function(a,b){return a.css(b)},wba:function(a){return(a=a.css("background-image"))&&-1!==a.indexOf("url(")?a.slice(a.indexOf("url(")+4,a.length-1).replace(/"/g,""):a},B4:function(a){var b={};a.css("border-top-color")&&(b["border-color"]=a.css("border-top-color"));a.css("border-width")&&a.css("border-style")&&"none"!=a.css("border-style")&&(b["border-width"]=a.css("border-width"));a.css("background-color")&&(b["background-color"]=a.css("background-color"));
return b},K4:function(a,b){var c={},d=a.css("font-family");d&&d!==g.P1&&(c["font-family"]=d.replace(/"/g,"'"));d=a.css("font-size");!d||-1<d.indexOf("px")&&parseFloat(d)<g.I1||b["font-size"]||(c["font-size"]=d);(d=a.css("font-weight"))&&d!==g.bN&&!b["font-weight"]&&(c["font-weight"]=d);(d=a.css("color"))&&d!==g.$M&&!b.color&&(c.color=d);(d=a.css("font-style"))&&d!==g.aN&&(c["font-style"]=d);return c},bha:function(a,b,c,d){var e=f(document.createElement("div"));e.attr("style","display:none;");a.append(e);
a="";for(var q=0;q<c.length;q++)a=a+c[q]+" ";e.attr("class",a);f(document.body).append(e);c=f(document.createElement("div"));c.css("font-size",g.Q1);c.css("color",g.$M);c.css("font-weight",g.bN);c.css("font-style",g.aN);e.append(c);for(var p in d)a=d[p],a instanceof Array||(a=[a]),g.Sba(c,b,p,a);e.remove()},Sba:function(a,b,c,d){g.GA[c]||(g.GA[c]={});for(var n=null,q=0;q<d.length;q++){var p=d[q],r=p.property;if(r){var s=g.GA[c][r];"undefined"==typeof s&&(n||(n=f(document.createElement("div")),n.addClass(c),
a.append(n)),s=g.Sca(n,r),g.GA[c][r]=s);if(null!=s){var p=new e(b,p.path),t=g[r];if(null!=t){var v=p.Pc();if("CSS_URL"!==r){r="";if(null!=v){for(var x in s)-1===v.indexOf(x)&&(r+=x+":"+s[x]+";");r+=v}else for(x in s)r+=x+":"+s[x]+";";s=r}}p.vha(s,null!=t)}}}},Sca:function(a,b){var c=g[b],c=c?c(a):g.Ffa(a,b);return null==c||"string"==typeof c&&""==c.replace(/^\s+/g,"")?null:c}};a.Da("oj.dvtBaseComponent",f.oj.baseComponent,{_ComponentCreate:function(){this._super();this.QH=f(document.createElement("div"));
this.QH.attr("style","visibility:hidden;");this.element.append(this.QH);var b=this.element[0].parentElement;this.Jf=b&&b.jF?b.jF:new c.DvtContext(this.element[0],null,this.QH[0]);this.Jf.setReadingDirection(this.hc());this.Jf.setTooltipAttachedCallback(a.Components.vf);this.Jf.setTooltipStyleClass("oj-dvt-tooltip");this.Jf.setDatatipStyleClass("oj-dvt-datatip");f(document.body).hasClass("oj-hicontrast")&&c.DvtAgent.setHighContrast(!0);this.oa=this.Ef(this.Jf,this.xi,this);this.Jf.getStage().addChild(this.oa);
this.vda();this.HU();this.kq()},Ug:function(){this._super();this.element.attr("tabIndex",0);this.Hf();this.uV=this.Nf.bind(this);a.C.jh(this.element[0],this.uV,250)},refresh:function(){this._super();this.Jf.setReadingDirection(this.hc());this.HU();this.Hf()},getNodeBySubId:function(a){var b=this.oa&&this.oa.getAutomation?this.oa.getAutomation():null;if(b)return b.getDomElementForSubId(this.si(a))},getSubIdByNode:function(a){var b=this.oa&&this.oa.getAutomation?this.oa.getAutomation():null;if(b)return(a=
b.getSubIdForDomElement(a))?this.ng(a):null},si:function(){return null},ng:function(){return null},Ix:function(){for(var a=this.He(),b=0;b<a.length;b++)this.element.addClass(a[b]);g.bha(this.element,this.options,this.He(),this.ti())},He:function(){return["oj-dvtbase"]},ti:function(){return{}},vi:function(){return[]},Jh:function(){var b=this.options.translations,b={"DvtUtilBundle.CLEAR_SELECTION":b.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":b.labelAndValue,"DvtUtilBundle.INVALID_DATA":b.labelInvalidData,
"DvtUtilBundle.NO_DATA":b.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":b.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":b.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":b.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":b.stateMaximized,"DvtUtilBundle.STATE_MINIMIZED":b.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":b.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":b.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":b.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":b.stateHidden,"DvtUtilBundle.STATE_VISIBLE":b.stateVisible,
"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":b.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":b.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":b.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":b.labelScalingSuffixTrillion,"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":b.labelScalingSuffixQuadrillion},c=a.La.iw("abbreviated");b["DvtUtilBundle.MONTH_SHORT_JANUARY"]=c[0];b["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=c[1];b["DvtUtilBundle.MONTH_SHORT_MARCH"]=c[2];
b["DvtUtilBundle.MONTH_SHORT_APRIL"]=c[3];b["DvtUtilBundle.MONTH_SHORT_MAY"]=c[4];b["DvtUtilBundle.MONTH_SHORT_JUNE"]=c[5];b["DvtUtilBundle.MONTH_SHORT_JULY"]=c[6];b["DvtUtilBundle.MONTH_SHORT_AUGUST"]=c[7];b["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=c[8];b["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=c[9];b["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=c[10];b["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=c[11];return b},YM:function(b,c){var d=this.options.translations[b];if(c){for(var e={},g=0;g<c.length;g++)e[c[g]]="{"+
g+"}";d=a.ha.Kb(d,e)}return d},HU:function(){var a=this.Jh();c.DvtBundle.addLocalizedStrings(a)},vda:function(){var b={};b.numberConverterFactory=a.na.qY("number");b.dateToIsoConverter=function(b){return b instanceof Date?a.eb.dateToLocalIso(b):b};b.isoToDateConverter=function(b){return"string"==typeof b?a.eb.isoToLocalDate(b):b};this.Jf.setLocaleHelpers(b)},_destroy:function(){this.Jf.hideTooltips();this.oa.destroy&&this.oa.destroy();a.C.gj(this.element[0],this.uV);this.element.children().remove();
this.element.removeAttr("role").removeAttr("tabIndex");for(var b=this.He(),c=0;c<b.length;c++)this.element.removeClass(b[c]);this._super()},_setOptions:function(a,b){this._superApply(arguments);if(!this.JO){var c=!1,d=this.vi(),e=["highlightedCategories","selection","dataCursorPosition"];f.each(a,function(a){if(0>d.indexOf(a)&&0>e.indexOf(a))return c=!0,!1});c?this.Hf():(void 0!==a.highlightedCategories&&this.oa.highlight(a.highlightedCategories),void 0!==a.selection&&this.oa.select(a.selection),
void 0!==a.dataCursorPosition&&this.oa.positionDataCursor&&this.oa.positionDataCursor(a.dataCursorPosition))}},Ef:function(){return null},xi:function(a){var b=a&&a.getType?a.getType():null;b===c.DvtCategoryHideShowEvent.TYPE_HIDE||b===c.DvtCategoryHideShowEvent.TYPE_SHOW?this.Cc("hiddenCategories",a.hiddenCategories):b===c.DvtCategoryRolloverEvent.TYPE_OVER||b===c.DvtCategoryRolloverEvent.TYPE_OUT?this.Cc("highlightedCategories",a.categories):b===c.DvtOptionChangeEvent.TYPE?this.Cc(a.key,a.value,
a.optionMetadata):this.options.contextMenu&&b===c.DvtComponentTouchEvent.TOUCH_HOVER_END_TYPE&&this.Ye(f.Event(a.getNativeEvent()),"touch")},Nf:function(){var a=this.element.width(),b=this.element.height();(null==this.bB||null==this.Bz||5<=Math.abs(a-this.bB)+Math.abs(b-this.Bz))&&this.Hf(!0)},kq:function(){},Hf:function(b){this.Jf.isReadyToRender()?(this.bB=this.element.width(),this.Bz=this.element.height(),this.options._width=this.bB,this.options._height=this.Bz,this.options._locale=a.ba.Wf(),this.Ix(),
this.oa.render(b?null:this.options,this.bB,this.Bz),this.bI=!1):(a.u.info(this.options.translations.messageNotReadyToRender.summary),this.bI=!0)},vk:function(){this._super();this.bI&&this.Hf()},Zl:function(){this._super();this.bI&&this.Hf()},yi:function(){this._super();this.Jf.hideTooltips()},$l:function(){this._super();this.Jf.hideTooltips()},Cc:function(a,b,c){this.JO=!0;this.option(a,b,{_context:{ed:!0,Vga:c,mb:!0}});this.JO=!1},Xe:function(a,b,c){"touch"!==c&&("keyboard"===c?this.Ye(b,c,{position:{of:this.oa.getKeyboardFocus()}}):
this._super(a,b,c))},kt:function(b){return(b=a.Components.Gg(b)("instance"))?b.oa:null},mg:function(a){if(a){var b={},c;for(c in a)this.O3(a,c,b);Object.defineProperties(a,b)}},O3:function(a,b,c){var d=("selected"==b?"is":"get")+b.charAt(0).toUpperCase()+b.slice(1);c[d]={value:function(){return a[b]}}},Wn:function(a){for(var b="",c=0;c<a.length;c++)b+="["+a[c]+"]";return b},tk:function(a){for(var b=[],c=0;0<a.indexOf("[",c);){var d=a.indexOf("[",c)+1,c=a.indexOf("]",c);b.push(Number(a.substring(d,
c)));c+=1}return b},wi:function(a){return Number(this.sx(a))},sx:function(a){var b=a.indexOf("[")+1,c=a.indexOf("]");return a.substring(b,c)}},!0);a.bt=function(a){this.Init(a)};o_("ShapeAttributeGroupHandler",a.bt,a);a.b.ga(a.bt,a.fg,"oj.ShapeAttributeGroupHandler");a.bt.Kt="square circle diamond plus triangleDown triangleUp human".split(" ");a.bt.prototype.sp=function(){return a.bt.Kt.slice()};a.xe=function(b){this.Kt=[];if(f(document.body).hasClass("oj-hicontrast"))this.Kt=a.xe.NM.slice();else{if(!a.xe.Ut){a.xe.Ut=
[];var c=f(document.createElement("div"));c.attr("style","display:none;");c.attr("id","attrGps");f(document.body).append(c);for(var d=0;d<a.xe.SN.length;d++){var e=f(document.createElement("div"));e.addClass(a.xe.SN[d]);c.append(e);(e=e.css("color"))&&a.xe.Ut.push(e)}c.remove()}this.Kt=0<a.xe.Ut.length?a.xe.Ut.slice():a.xe.NM.slice()}this.Init(b)};o_("ColorAttributeGroupHandler",a.xe,a);a.b.ga(a.xe,a.fg,"oj.ColorAttributeGroupHandler");a.xe.NM="#267db3 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");
a.xe.SN="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");a.xe.Ut=null;a.xe.prototype.sp=function(){return this.Kt.slice()};e.prototype.Rca=function(a,b,c,d){for(var e={};a&&-1<b.indexOf(c);){var g=b.substring(0,b.indexOf(c));d&&void 0===a[g]&&(a[g]={});a=a[g];b=b.substring(b.indexOf(c)+1,b.length)}a&&(e.object=a,e.parameter=b);return e};
e.prototype.zV=function(a){void 0===this.Wu&&(a=this.Rca(this.Xca,this.xba,this.u6,a),this.Wu=a.object,this.BH=a.parameter)};e.prototype.Pc=function(){this.zV(!1);return void 0===this.Wu?void 0:this.Wu[this.BH]};e.prototype.vha=function(a,b){this.zV(!0);if(b||!this.Wu[this.BH])this.Wu[this.BH]=a}});