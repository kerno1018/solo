define(["jquery","knockout"],function(e,t){"use strict";var n=function(n,a){var o=this,i=n.widgetOptions.config;o.widget=t.observable(n),o.dashboardViewModel=a,o.headerTitle=i.headerTitle||"Configure "+n.name+" widget",o.headerSubTitle=i.headerSubTitle||null,i.viewModelPath=i.viewModelPath&&0!==i.viewModelPath.indexOf("modules/")?window.__MODULE_PREFIX__(n.module,i.viewModelPath):i.viewModelPath,i.templatePath=i.templatePath&&0!==i.templatePath.indexOf("modules/")?window.__MODULE_PREFIX__(n.module,i.templatePath):i.templatePath,function(a){a.viewModelPath?require([a.viewModelPath],function(i){e.extend(o,new i(n.settings)),a.onInitCallback&&"function"==typeof o[a.onInitCallback]&&o[a.onInitCallback](),setTimeout(function(){t.applyBindingsToNode(document.getElementById("WIDGET_CONFIG_TEMPLATE"),{template:{name:a.templatePath,data:o,afterRender:a.afterRender&&"function"==typeof o[a.afterRender]?o[a.afterRender]:null}}),a.afterRouting&&"function"==typeof o[a.afterRouting]&&o[a.afterRouting]()},500)}):t.applyBindingsToNode(document.getElementById("WIDGET_CONFIG_TEMPLATE"),{template:{name:a.templatePath}})}(i)};return n.prototype.modalClose=function(){var e=this;e.modal.close()},n.prototype.modalSubmit=function(){var e=this,t=e.widget(),n={},a=t.widgetOptions.config;!function(t){t.onSaveCallback&&"function"==typeof e[t.onSaveCallback]&&(n=e[t.onSaveCallback]())}(a),e.modal.close(n)},n});